import{f as n,j as e}from"./index-D2rQtZIu.js";import{u as r}from"./useQuery-Comv7ry7.js";function d(){return r({queryKey:["tasks","metrics"],queryFn:()=>n.getMetrics(),refetchInterval:3e4})}function p(){const{data:t,isLoading:l,error:c}=d();if(l)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-slate-400",children:"Loading analytics..."})});if(c)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-red-400",children:"Failed to load analytics data"})});const i=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsx("header",{className:"flex justify-between items-center px-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black tracking-tighter text-glow mb-1 uppercase",children:"Analytics"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Task completion metrics and system health"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-teal-400",children:t.total_tasks}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Total Tasks"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"text-3xl font-bold text-emerald-400",children:[t.completion_rate,"%"]}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Completion Rate"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-sky-400",children:t.ready_to_claim}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Ready to Claim"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:t.average_completion_time_hours?`${t.average_completion_time_hours}h`:"N/A"}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Avg Completion"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Tasks by Status"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.tasks_by_status).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:`text-sm font-bold ${s==="done"?"text-emerald-400":s==="in_progress"?"text-amber-400":s==="blocked"?"text-rose-400":s==="in_review"?"text-sky-400":"text-slate-300"}`,children:a})]},s))})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Tasks by Priority"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.tasks_by_priority).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:s}),e.jsx("span",{className:`text-sm font-bold ${s==="HIGH"?"text-rose-400":s==="MEDIUM"?"text-amber-400":"text-slate-300"}`,children:a})]},s))})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Tasks by Type"}),e.jsx("div",{className:"space-y-2",children:Object.entries(t.tasks_by_type).map(([s,a])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:"text-sm font-bold text-slate-300",children:a})]},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"System Health"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Stale Tasks (>20m)"}),e.jsx("span",{className:`text-sm font-bold ${t.stale_tasks_count>0?"text-rose-400":"text-emerald-400"}`,children:t.stale_tasks_count})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Blocked Tasks"}),e.jsx("span",{className:`text-sm font-bold ${t.blocked_tasks_count>0?"text-amber-400":"text-slate-300"}`,children:t.blocked_tasks_count})]})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Active Agents"}),t.active_agents&&t.active_agents.length>0?e.jsx("div",{className:"space-y-2",children:t.active_agents.map(s=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-bold text-slate-200",children:s.agent_name}),e.jsxs("span",{className:"text-[10px] px-2 py-1 rounded bg-amber-500/20 text-amber-400 uppercase tracking-widest",children:[s.active_tasks," task",s.active_tasks!==1?"s":""]})]}),s.task_ids&&s.task_ids.length>0&&e.jsx("div",{className:"mt-2 text-[10px] text-slate-500 font-mono",children:s.task_ids.join(", ")})]},s.agent_name))}):e.jsx("p",{className:"text-xs text-slate-500",children:"No active agents"})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Recent Completions"}),t.recent_completions&&t.recent_completions.length>0?e.jsx("div",{className:"space-y-2",children:t.recent_completions.map(s=>e.jsx("div",{className:"bg-white/5 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] font-mono text-teal-400",children:s.task_id}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400 uppercase tracking-widest",children:"Done"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-200 truncate",children:s.title}),e.jsxs("p",{className:"text-[10px] text-slate-500 mt-1",children:["By: ",s.completed_by]})]}),e.jsx("div",{className:"text-[10px] text-slate-400 whitespace-nowrap",children:i(s.completed_at)})]})},s.task_id))}):e.jsx("p",{className:"text-xs text-slate-500",children:"No recent completions"})]})]})}export{p as default};
