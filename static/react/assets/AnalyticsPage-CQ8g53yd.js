import{l as r,j as e}from"./index-DQN6gfX2.js";import{u as d}from"./useQuery-Cg-7j83T.js";import{c as a}from"./dateFormat-Ck_uZvap.js";import{L as n}from"./LoadingSpinner-FuLrNsJY.js";function x(){return d({queryKey:["tasks","metrics"],queryFn:()=>r.getMetrics(),refetchInterval:3e4})}function j(){const{data:t,isLoading:l,error:i}=x();return l?e.jsx(n,{fullScreen:!0,message:"Loading analytics..."}):i?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-red-400",children:"Failed to load analytics data"})}):e.jsxs("div",{className:"space-y-6 pb-10",children:[e.jsx("header",{className:"flex justify-between items-center px-2",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black tracking-tighter text-glow mb-1 uppercase",children:"Analytics"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Comic reading metrics and engagement stats"})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-teal-400",children:t.total_threads||0}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Total Threads"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-sky-400",children:t.active_threads||0}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Active Threads"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400",children:t.completed_threads||0}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Completed"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400",children:Number.isFinite(t.completion_rate)?`${t.completion_rate.toFixed(1)}%`:"N/A"}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Completion Rate"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-400",children:Number.isFinite(t.average_session_hours)?`${t.average_session_hours.toFixed(1)}h`:"N/A"}),e.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-widest mt-1",children:"Avg Session"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Recent Sessions"}),t.recent_sessions&&t.recent_sessions.length>0?e.jsx("div",{className:"space-y-2",children:t.recent_sessions.slice(0,5).map(s=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-[10px] font-mono text-teal-400",children:["Session #",s.id]}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded bg-purple-500/20 text-purple-400 uppercase tracking-widest",children:["Die ",s.start_die]})]}),e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-slate-400",children:"Started:"}),e.jsx("span",{className:"text-slate-300",children:a(s.started_at)})]}),s.ended_at&&e.jsxs("div",{className:"flex items-center justify-between text-[10px] mt-1",children:[e.jsx("span",{className:"text-slate-400",children:"Ended:"}),e.jsx("span",{className:"text-slate-300",children:a(s.ended_at)})]}),!s.ended_at&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-emerald-500/20 text-emerald-400 uppercase tracking-widest",children:"Active"})})]},s.id))}):e.jsx("p",{className:"text-xs text-slate-500",children:"No recent sessions"})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Event Statistics"}),t.event_stats&&Object.keys(t.event_stats).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(t.event_stats).map(([s,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400 capitalize",children:s.replace("_"," ")}),e.jsx("span",{className:`text-sm font-bold ${s==="roll"?"text-teal-400":s==="rate"?"text-amber-400":s==="undo"?"text-rose-400":"text-slate-300"}`,children:c})]},s))}):e.jsx("p",{className:"text-xs text-slate-500",children:"No event data available"})]})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-slate-300 mb-3",children:"Top Rated Comics"}),t.top_rated_threads&&t.top_rated_threads.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.top_rated_threads.map(s=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-200 line-clamp-2 flex-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("span",{className:"text-amber-400 text-sm",children:"â˜…"}),e.jsx("span",{className:"text-sm font-bold text-amber-400",children:Number.isFinite(s.rating)?s.rating.toFixed(1):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[10px] font-mono text-teal-400",children:["#",s.id]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-sky-500/20 text-sky-400 uppercase tracking-widest",children:s.format||"Unknown"})]})]},s.id))}):e.jsx("p",{className:"text-xs text-slate-500",children:"No rated comics yet"})]})]})}export{j as default};
