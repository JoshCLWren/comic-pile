import{u as p,g as u,a as l,j as e}from"./index-BEwr_gqB.js";import{u as d}from"./useQuery-DjqTdcA7.js";import{u as x}from"./useMutation-C0FTNoCi.js";function g(){return d({queryKey:["settings"],queryFn:()=>u.get()})}function c(){const a=p();return x({mutationFn:n=>u.update(n),onSuccess:()=>{a.invalidateQueries({queryKey:["settings"]})}})}const m={sessionGapHours:6,startDie:6,ratingMin:.5,ratingMax:5,ratingStep:.5,ratingThreshold:4};function y(){const{data:a,isLoading:n}=g(),i=c(),[t,r]=l.useState(m);l.useEffect(()=>{a&&r({sessionGapHours:a.session_gap_hours,startDie:a.start_die,ratingMin:a.rating_min,ratingMax:a.rating_max,ratingStep:a.rating_step,ratingThreshold:a.rating_threshold})},[a]);const o=s=>{s.preventDefault(),i.mutate({session_gap_hours:Number(t.sessionGapHours),start_die:Number(t.startDie),rating_min:Number(t.ratingMin),rating_max:Number(t.ratingMax),rating_step:Number(t.ratingStep),rating_threshold:Number(t.ratingThreshold)})};return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e.jsxs("div",{className:"space-y-8 pb-20",children:[e.jsxs("header",{className:"px-2",children:[e.jsx("h1",{className:"text-4xl font-black tracking-tighter text-glow mb-1 uppercase",children:"Settings"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Tune your dice workflow"})]}),e.jsxs("form",{className:"glass-card p-6 space-y-6 max-w-2xl",onSubmit:o,children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Session Gap (hours)",e.jsx("input",{type:"number",min:"1",value:t.sessionGapHours,onChange:s=>r({...t,sessionGapHours:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]}),e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Start Die",e.jsx("input",{type:"number",min:"4",value:t.startDie,onChange:s=>r({...t,startDie:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]}),e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Rating Min",e.jsx("input",{type:"number",step:"0.1",value:t.ratingMin,onChange:s=>r({...t,ratingMin:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]}),e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Rating Max",e.jsx("input",{type:"number",step:"0.1",value:t.ratingMax,onChange:s=>r({...t,ratingMax:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]}),e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Rating Step",e.jsx("input",{type:"number",step:"0.1",value:t.ratingStep,onChange:s=>r({...t,ratingStep:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]}),e.jsxs("label",{className:"space-y-2 text-xs font-bold uppercase tracking-widest text-slate-500",children:["Rating Threshold",e.jsx("input",{type:"number",step:"0.1",value:t.ratingThreshold,onChange:s=>r({...t,ratingThreshold:s.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl px-3 py-2 text-sm text-slate-200"})]})]}),e.jsx("button",{type:"submit",disabled:i.isPending,className:"w-full py-3 glass-button text-xs font-black uppercase tracking-widest disabled:opacity-60",children:i.isPending?"Saving...":"Save Settings"})]})]})}export{y as default};
